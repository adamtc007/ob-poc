# Invalid Inspector Projection fixture - for testing validation errors
# Contains: dangling refs, missing provenance, invalid confidence

snapshot:
  schema_version: 1
  source_hash: "test-invalid"
  policy_hash: "policy789"
  created_at: "2026-02-04T12:00:00Z"

render_policy:
  lod: 2
  max_depth: 10
  max_items_per_list: 50

ui_hints:
  shorthand_labels: true
  breadcrumb: true
  history: true

root:
  cbu:
    $ref: "cbu:test"

nodes:
  "cbu:test":
    kind: CBU
    id: "cbu:test"
    label_short: "Test CBU"
    glyph: "cbu"
    branches:
      # ERROR: Dangling ref - this target doesn't exist
      members:
        $ref: "memberlist:nonexistent"
      # ERROR: Another dangling ref
      products:
        $ref: "producttree:missing"

  # ERROR: HoldingEdge without provenance (required)
  "holdingedge:no-provenance":
    kind: HoldingEdge
    id: "holdingedge:no-provenance"
    label_short: "Bad Edge"
    glyph: "edge"
    attributes:
      holder_entity_id: "entity:uuid-001"
      held_entity_id: "entity:uuid-002"
      holding_pct: 50.0
    # Missing provenance field!

  # ERROR: ControlEdge without provenance (required)
  "controledge:no-provenance":
    kind: ControlEdge
    id: "controledge:no-provenance"
    label_short: "Bad Control"
    glyph: "edge"
    attributes:
      controller_id: "entity:uuid-001"
      controlled_id: "entity:uuid-002"
      voting_pct: 75.0
    # Missing provenance field!

  # ERROR: Invalid confidence (> 1.0)
  "holdingedge:bad-confidence":
    kind: HoldingEdge
    id: "holdingedge:bad-confidence"
    label_short: "Invalid Confidence"
    glyph: "edge"
    attributes:
      holder_entity_id: "entity:uuid-003"
      held_entity_id: "entity:uuid-004"
      holding_pct: 25.0
    provenance:
      sources:
        - "test"
      asserted_at: "2026-01-01"
      confidence: 1.5 # ERROR: Must be 0.0-1.0

  # ERROR: Negative confidence
  "controledge:negative-confidence":
    kind: ControlEdge
    id: "controledge:negative-confidence"
    label_short: "Negative Confidence"
    glyph: "edge"
    attributes:
      controller_id: "entity:uuid-005"
      controlled_id: "entity:uuid-006"
      voting_pct: 100.0
    provenance:
      sources:
        - "test"
      asserted_at: "2026-01-01"
      confidence: -0.5 # ERROR: Must be 0.0-1.0
