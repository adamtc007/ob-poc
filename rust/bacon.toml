# Bacon configuration for ob-poc workspace

# =============================================================================
# MAIN CRATE JOBS (ob-poc)
# =============================================================================

[jobs.check]
command = ["cargo", "check", "--features", "database", "--color", "always"]
need_stdout = false

[jobs.check-all]
command = ["cargo", "check", "--all-targets", "--features", "database", "--color", "always"]
need_stdout = false

[jobs.check-server]
command = ["cargo", "check", "--features", "server", "--color", "always"]
need_stdout = false

[jobs.check-mcp]
command = ["cargo", "check", "--features", "mcp", "--color", "always"]
need_stdout = false

[jobs.check-cli]
command = ["cargo", "check", "--features", "cli,database", "--color", "always"]
need_stdout = false

[jobs.clippy]
command = ["cargo", "clippy", "--features", "database", "--color", "always"]
need_stdout = false

[jobs.clippy-all]
command = ["cargo", "clippy", "--all-targets", "--features", "database", "--color", "always"]
need_stdout = false

[jobs.clippy-server]
command = ["cargo", "clippy", "--features", "server", "--color", "always"]
need_stdout = false

[jobs.clippy-mcp]
command = ["cargo", "clippy", "--features", "mcp", "--color", "always"]
need_stdout = false

[jobs.clippy-cli]
command = ["cargo", "clippy", "--features", "cli,database", "--color", "always"]
need_stdout = false

[jobs.test]
command = ["cargo", "test", "--lib", "--features", "database", "--color", "always"]
need_stdout = true

[jobs.test-all]
command = ["cargo", "test", "--features", "database", "--color", "always"]
need_stdout = true

[jobs.doc]
command = ["cargo", "doc", "--features", "database", "--color", "always"]
need_stdout = false

# =============================================================================
# WORKSPACE JOBS (all crates)
# =============================================================================

[jobs.check-workspace]
command = ["cargo", "check", "--workspace", "--color", "always"]
need_stdout = false

[jobs.clippy-workspace]
command = ["cargo", "clippy", "--workspace", "--color", "always"]
need_stdout = false

[jobs.test-workspace]
command = ["cargo", "test", "--workspace", "--color", "always"]
need_stdout = true

# =============================================================================
# INDIVIDUAL CRATE JOBS
# =============================================================================

# dsl-core (no features)
[jobs.check-dsl-core]
command = ["cargo", "check", "-p", "dsl-core", "--color", "always"]
need_stdout = false

[jobs.clippy-dsl-core]
command = ["cargo", "clippy", "-p", "dsl-core", "--color", "always"]
need_stdout = false

[jobs.test-dsl-core]
command = ["cargo", "test", "-p", "dsl-core", "--color", "always"]
need_stdout = true

# entity-gateway
[jobs.check-gateway]
command = ["cargo", "check", "-p", "entity-gateway", "--color", "always"]
need_stdout = false

[jobs.clippy-gateway]
command = ["cargo", "clippy", "-p", "entity-gateway", "--color", "always"]
need_stdout = false

# ob-agentic
[jobs.check-agentic]
command = ["cargo", "check", "-p", "ob-agentic", "--color", "always"]
need_stdout = false

[jobs.clippy-agentic]
command = ["cargo", "clippy", "-p", "ob-agentic", "--color", "always"]
need_stdout = false

# ob-templates
[jobs.check-templates]
command = ["cargo", "check", "-p", "ob-templates", "--color", "always"]
need_stdout = false

[jobs.clippy-templates]
command = ["cargo", "clippy", "-p", "ob-templates", "--color", "always"]
need_stdout = false

# ob-workflow
[jobs.check-workflow]
command = ["cargo", "check", "-p", "ob-workflow", "--color", "always"]
need_stdout = false

[jobs.clippy-workflow]
command = ["cargo", "clippy", "-p", "ob-workflow", "--color", "always"]
need_stdout = false

# ob-poc-web (web server)
[jobs.check-web]
command = ["cargo", "check", "-p", "ob-poc-web", "--color", "always"]
need_stdout = false

[jobs.clippy-web]
command = ["cargo", "clippy", "-p", "ob-poc-web", "--color", "always"]
need_stdout = false

# ob-poc-types
[jobs.check-types]
command = ["cargo", "check", "-p", "ob-poc-types", "--color", "always"]
need_stdout = false

[jobs.clippy-types]
command = ["cargo", "clippy", "-p", "ob-poc-types", "--color", "always"]
need_stdout = false

# ob-poc-macros
[jobs.check-macros]
command = ["cargo", "check", "-p", "ob-poc-macros", "--color", "always"]
need_stdout = false

[jobs.clippy-macros]
command = ["cargo", "clippy", "-p", "ob-poc-macros", "--color", "always"]
need_stdout = false

# ob-execution-types
[jobs.check-exec-types]
command = ["cargo", "check", "-p", "ob-execution-types", "--color", "always"]
need_stdout = false

[jobs.clippy-exec-types]
command = ["cargo", "clippy", "-p", "ob-execution-types", "--color", "always"]
need_stdout = false

# ob-semantic-matcher
[jobs.check-semantic]
command = ["cargo", "check", "-p", "ob-semantic-matcher", "--color", "always"]
need_stdout = false

[jobs.clippy-semantic]
command = ["cargo", "clippy", "-p", "ob-semantic-matcher", "--color", "always"]
need_stdout = false

# inspector-projection
[jobs.check-inspector]
command = ["cargo", "check", "-p", "inspector-projection", "--color", "always"]
need_stdout = false

[jobs.clippy-inspector]
command = ["cargo", "clippy", "-p", "inspector-projection", "--color", "always"]
need_stdout = false

# playbook-core
[jobs.check-playbook-core]
command = ["cargo", "check", "-p", "playbook-core", "--color", "always"]
need_stdout = false

[jobs.clippy-playbook-core]
command = ["cargo", "clippy", "-p", "playbook-core", "--color", "always"]
need_stdout = false

# playbook-lower
[jobs.check-playbook-lower]
command = ["cargo", "check", "-p", "playbook-lower", "--color", "always"]
need_stdout = false

[jobs.clippy-playbook-lower]
command = ["cargo", "clippy", "-p", "playbook-lower", "--color", "always"]
need_stdout = false

# dsl-lsp (LSP server)
[jobs.check-lsp]
command = ["cargo", "check", "-p", "dsl-lsp", "--color", "always"]
need_stdout = false

[jobs.clippy-lsp]
command = ["cargo", "clippy", "-p", "dsl-lsp", "--color", "always"]
need_stdout = false

# =============================================================================
# SEMANTIC OS CRATES (sem_os_*)
# =============================================================================

# sem_os_core
[jobs.check-sem-core]
command = ["cargo", "check", "-p", "sem_os_core", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-core]
command = ["cargo", "clippy", "-p", "sem_os_core", "--color", "always"]
need_stdout = false

[jobs.test-sem-core]
command = ["cargo", "test", "-p", "sem_os_core", "--color", "always"]
need_stdout = true

# sem_os_postgres
[jobs.check-sem-pg]
command = ["cargo", "check", "-p", "sem_os_postgres", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-pg]
command = ["cargo", "clippy", "-p", "sem_os_postgres", "--color", "always"]
need_stdout = false

# sem_os_server
[jobs.check-sem-server]
command = ["cargo", "check", "-p", "sem_os_server", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-server]
command = ["cargo", "clippy", "-p", "sem_os_server", "--color", "always"]
need_stdout = false

[jobs.test-sem-server]
command = ["cargo", "test", "-p", "sem_os_server", "--color", "always"]
need_stdout = true

# sem_os_client
[jobs.check-sem-client]
command = ["cargo", "check", "-p", "sem_os_client", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-client]
command = ["cargo", "clippy", "-p", "sem_os_client", "--color", "always"]
need_stdout = false

# sem_os_obpoc_adapter
[jobs.check-sem-adapter]
command = ["cargo", "check", "-p", "sem_os_obpoc_adapter", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-adapter]
command = ["cargo", "clippy", "-p", "sem_os_obpoc_adapter", "--color", "always"]
need_stdout = false

# sem_os_harness
[jobs.check-sem-harness]
command = ["cargo", "check", "-p", "sem_os_harness", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-harness]
command = ["cargo", "clippy", "-p", "sem_os_harness", "--color", "always"]
need_stdout = false

# =============================================================================
# SEMANTIC OS COMPOSITE JOBS
# =============================================================================

# Check all 6 sem_os crates at once
[jobs.check-sem-all]
command = ["cargo", "check", "-p", "sem_os_core", "-p", "sem_os_postgres", "-p", "sem_os_server", "-p", "sem_os_client", "-p", "sem_os_obpoc_adapter", "-p", "sem_os_harness", "--color", "always"]
need_stdout = false

[jobs.clippy-sem-all]
command = ["cargo", "clippy", "-p", "sem_os_core", "-p", "sem_os_postgres", "-p", "sem_os_server", "-p", "sem_os_client", "-p", "sem_os_obpoc_adapter", "-p", "sem_os_harness", "--color", "always"]
need_stdout = false

[jobs.test-sem-all]
command = ["cargo", "test", "-p", "sem_os_core", "-p", "sem_os_server", "--color", "always"]
need_stdout = true

# =============================================================================
# XTASK
# =============================================================================

[jobs.check-xtask]
command = ["cargo", "check", "-p", "xtask", "--color", "always"]
need_stdout = false

[jobs.clippy-xtask]
command = ["cargo", "clippy", "-p", "xtask", "--color", "always"]
need_stdout = false

# =============================================================================
# DEFAULTS AND KEYBINDINGS
# =============================================================================

default_job = "check"

[keybindings]
# Main crate
c = "job:check"
l = "job:clippy"
t = "job:test"
a = "job:check-all"
s = "job:clippy-server"
m = "job:clippy-mcp"

# Workspace
w = "job:check-workspace"
W = "job:clippy-workspace"

# Individual crates (Shift + letter)
D = "job:clippy-dsl-core"
G = "job:clippy-gateway"
A = "job:clippy-agentic"
T = "job:clippy-templates"
L = "job:clippy-lsp"

# Semantic OS
S = "job:clippy-sem-all"

[settings]
on_change_strategy = "restart"
