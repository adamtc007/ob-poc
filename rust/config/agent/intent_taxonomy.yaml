# Hierarchical intent taxonomy for trading matrix domain
# Phase 3.1: Agent Intelligence - Intent Classification
#
# This taxonomy defines all recognizable intents for the trading matrix agent.
# Each intent maps to a canonical DSL verb and includes trigger phrases,
# required/optional entities, and default inference rules.

version: "1.0"
description: "Trading matrix domain intent taxonomy"

# Intent taxonomy organized by domain/subdomain/intent
intent_taxonomy:
  # ==========================================================================
  # TRADING MATRIX DOMAIN
  # ==========================================================================
  trading_matrix:
    description: "Configuration of trading capabilities and operational setup"

    # ------------------------------------------------------------------------
    # Investment Manager Sub-domain
    # ------------------------------------------------------------------------
    investment_manager:
      description: "Investment manager assignment, scope, and connectivity"

      intents:
        - intent: im_assign
          description: "Assign a new investment manager to CBU"
          canonical_verb: investment-manager.assign
          trigger_phrases:
            - "add {manager} as investment manager"
            - "{manager} will handle {scope}"
            - "assign {manager} to trade {scope}"
            - "set up {manager} for {scope}"
            - "{manager} manages {scope}"
            - "use {manager} for {scope}"
            - "{manager} to do {scope}"
            - "bring on {manager}"
            - "onboard {manager} as IM"
          required_entities:
            - manager_name_or_lei
          optional_entities:
            - scope_markets
            - scope_instruments
            - instruction_method
            - priority
          default_inferences:
            priority: 100
            instruction_method: SWIFT
          examples:
            - input: "BlackRock will handle European equities via CTM"
              entities:
                manager_name_or_lei: "BlackRock"
                scope_markets: ["XLON", "XETR", "XPAR", "XAMS"]
                scope_instruments: ["EQUITY"]
                instruction_method: "CTM"

        - intent: im_update_scope
          description: "Modify an existing IM's trading scope"
          canonical_verb: investment-manager.set-scope
          trigger_phrases:
            - "expand {manager} to include {scope}"
            - "restrict {manager} to {scope}"
            - "add {scope} to {manager}'s mandate"
            - "{manager} can now trade {scope}"
            - "extend {manager} scope to {scope}"
            - "limit {manager} to only {scope}"
          required_entities:
            - manager_reference # Must resolve to existing IM
            - scope_modification
          examples:
            - input: "Expand BlackRock to include Asian equities"
              entities:
                manager_reference: "@im-blackrock"
                scope_modification:
                  action: "add"
                  markets: ["XHKG", "XTKS", "XSES"]

        - intent: im_change_connectivity
          description: "Change how IM sends trade instructions"
          canonical_verb: investment-manager.link-connectivity
          trigger_phrases:
            - "switch {manager} to {method}"
            - "{manager} will use {method} now"
            - "connect {manager} via {method}"
            - "change {manager} to {method}"
            - "{manager} instructions via {method}"
          required_entities:
            - manager_reference
            - instruction_method
          examples:
            - input: "Switch BlackRock to FIX"
              entities:
                manager_reference: "@im-blackrock"
                instruction_method: "FIX"

        - intent: im_remove
          description: "Remove an investment manager from CBU"
          canonical_verb: investment-manager.remove
          trigger_phrases:
            - "remove {manager}"
            - "terminate {manager}"
            - "drop {manager}"
            - "{manager} is no longer our IM"
            - "offboard {manager}"
          required_entities:
            - manager_reference

        - intent: im_query
          description: "Query about IM configuration"
          canonical_verb: investment-manager.list
          trigger_phrases:
            - "who handles {scope}"
            - "which IM trades {scope}"
            - "show me the investment managers"
            - "what can {manager} trade"
            - "list all IMs"
            - "who are our investment managers"
          is_query: true
          required_entities: []
          optional_entities:
            - scope_filter
            - manager_reference

        - intent: im_find_for_trade
          description: "Find which IM would handle a specific trade"
          canonical_verb: investment-manager.find-for-trade
          trigger_phrases:
            - "who would handle a {instrument} trade in {market}"
            - "which IM for {trade_description}"
            - "route this trade: {trade_description}"
            - "who trades {instrument} in {market}"
          is_query: true
          required_entities:
            - trade_characteristics

    # ------------------------------------------------------------------------
    # Pricing Sub-domain
    # ------------------------------------------------------------------------
    pricing:
      description: "Pricing source configuration"

      intents:
        - intent: pricing_set
          description: "Configure pricing source for instrument class"
          canonical_verb: pricing-config.set
          trigger_phrases:
            - "use {source} for {instruments}"
            - "{source} pricing for {instruments}"
            - "price {instruments} from {source}"
            - "{source} across the board"
            - "{source} for everything"
            - "get prices from {source}"
            - "{source} for all pricing"
          required_entities:
            - pricing_source
          optional_entities:
            - instrument_classes # If omitted, infer from context or use all
            - priority
          default_inferences:
            priority: 1
          examples:
            - input: "Bloomberg for equities and bonds"
              entities:
                pricing_source: "BLOOMBERG"
                instrument_classes: ["EQUITY", "GOVT_BOND", "CORP_BOND"]
            - input: "Bloomberg across the board"
              entities:
                pricing_source: "BLOOMBERG"
                instrument_classes: "_ALL_IN_UNIVERSE"

        - intent: pricing_set_fallback
          description: "Configure fallback pricing source"
          canonical_verb: pricing-config.set
          trigger_phrases:
            - "fall back to {source} for {instruments}"
            - "use {source} as backup for {instruments}"
            - "secondary pricing from {source}"
            - "if {primary} fails, use {source}"
          required_entities:
            - pricing_source
          optional_entities:
            - instrument_classes
          default_inferences:
            priority: 2 # Lower priority = fallback

        - intent: pricing_query
          description: "Query pricing configuration"
          canonical_verb: pricing-config.list
          trigger_phrases:
            - "what's the pricing source for {instruments}"
            - "where do we get {instrument} prices"
            - "show pricing config"
            - "pricing sources"
          is_query: true
          required_entities: []

    # ------------------------------------------------------------------------
    # Cash Management Sub-domain
    # ------------------------------------------------------------------------
    cash_management:
      description: "Cash sweep and STIF configuration"

      intents:
        - intent: sweep_configure
          description: "Set up cash sweep"
          canonical_verb: cash-sweep.configure
          trigger_phrases:
            - "sweep {currency} above {amount} to {vehicle}"
            - "set up {currency} sweep"
            - "{currency} cash to STIF"
            - "sweep idle {currency}"
            - "cash sweep for {currency}"
            - "{currency} to money market"
          required_entities:
            - currency
          optional_entities:
            - threshold_amount
            - vehicle_type
            - sweep_time
          default_inferences:
            vehicle_type: STIF
            threshold_amount_by_currency:
              USD: 100000
              EUR: 100000
              GBP: 75000
              JPY: 10000000
              CHF: 100000
          examples:
            - input: "Sweep USD above 500k to STIF"
              entities:
                currency: "USD"
                threshold_amount: 500000
                vehicle_type: "STIF"

        - intent: sweep_update_threshold
          description: "Update sweep threshold"
          canonical_verb: cash-sweep.update-threshold
          trigger_phrases:
            - "change {currency} threshold to {amount}"
            - "increase {currency} sweep to {amount}"
            - "lower the {currency} threshold"
          required_entities:
            - currency
            - threshold_amount

        - intent: sweep_query
          description: "Query sweep configuration"
          canonical_verb: cash-sweep.list
          trigger_phrases:
            - "what are the sweep thresholds"
            - "show cash sweeps"
            - "where does {currency} cash go"
          is_query: true
          required_entities: []

    # ------------------------------------------------------------------------
    # SLA Sub-domain
    # ------------------------------------------------------------------------
    sla:
      description: "Service level agreement management"

      intents:
        - intent: sla_commit
          description: "Create SLA commitment"
          canonical_verb: sla.commit
          trigger_phrases:
            - "we need {target}% {metric}"
            - "SLA for {metric}"
            - "commit to {target} {metric}"
            - "{metric} must be {target}"
            - "guarantee {target}% {metric}"
            - "{metric} SLA of {target}%"
          required_entities:
            - metric_type_or_template
          optional_entities:
            - target_override
          examples:
            - input: "We need 99.5% settlement rate"
              entities:
                metric_type_or_template: "settlement_rate"
                target_override: 99.5

        - intent: sla_use_template
          description: "Apply SLA template"
          canonical_verb: sla.apply-template
          trigger_phrases:
            - "use {template} SLA template"
            - "apply {template} SLAs"
            - "standard {template} commitments"
          required_entities:
            - template_name

        - intent: sla_query
          description: "Query SLA status"
          canonical_verb: sla.list-commitments
          trigger_phrases:
            - "what are our SLAs"
            - "show SLA coverage"
            - "are we meeting SLAs"
            - "any SLA breaches"
            - "SLA status"
          is_query: true
          required_entities: []

    # ------------------------------------------------------------------------
    # Trading Profile Sub-domain
    # ------------------------------------------------------------------------
    profile:
      description: "Trading profile lifecycle"

      intents:
        - intent: profile_create
          description: "Start new trading profile"
          canonical_verb: trading-profile.create
          trigger_phrases:
            - "start trading profile"
            - "new trading matrix"
            - "set up trading for {cbu}"
            - "traded instruments day"
            - "configure trading"
            - "begin trading setup"
            - "create trading profile"
          required_entities: []
          optional_entities:
            - cbu_reference
            - base_currency
          default_inferences:
            cbu_reference: "_CURRENT_CBU"

        - intent: profile_set_universe
          description: "Define tradeable universe"
          canonical_verb: trading-profile.set-universe
          trigger_phrases:
            - "we trade {instruments} in {markets}"
            - "universe is {instruments} in {markets}"
            - "add {instruments} to universe"
            - "trade {instruments} across {markets}"
          required_entities:
            - instrument_classes
          optional_entities:
            - markets
            - currencies

        - intent: profile_visualize
          description: "Show trading matrix visually"
          canonical_verb: trading-profile.visualize
          trigger_phrases:
            - "show me the matrix"
            - "visualize trading profile"
            - "what can we trade"
            - "trading overview"
            - "show the grid"
          is_query: true
          required_entities: []

        - intent: profile_validate
          description: "Check for configuration gaps"
          canonical_verb: trading-profile.validate-matrix
          trigger_phrases:
            - "check for gaps"
            - "validate the profile"
            - "is anything missing"
            - "are we complete"
            - "what's missing"
            - "any gaps"
          is_query: true
          required_entities: []

        - intent: profile_materialize
          description: "Push profile to operational tables"
          canonical_verb: trading-profile.materialize
          trigger_phrases:
            - "activate this"
            - "push to production"
            - "materialize"
            - "make it live"
            - "we're done, save it"
            - "finalize"
            - "go live"
          required_entities: []
          confirmation_required: true

    # ------------------------------------------------------------------------
    # Custody/Settlement Sub-domain
    # ------------------------------------------------------------------------
    custody:
      description: "Custody accounts and settlement instructions"

      intents:
        - intent: ssi_create
          description: "Create standing settlement instruction"
          canonical_verb: cbu-custody.ensure-ssi
          trigger_phrases:
            - "create SSI for {market}"
            - "set up settlement for {market}"
            - "SSI with {custodian}"
            - "settlement account at {custodian}"
          required_entities:
            - ssi_type
          optional_entities:
            - market
            - custodian_bic
            - currency

        - intent: booking_rule_create
          description: "Create booking rule for SSI routing"
          canonical_verb: cbu-custody.ensure-booking-rule
          trigger_phrases:
            - "route {instruments} in {market} to {ssi}"
            - "book {scope} trades to {ssi}"
            - "use {ssi} for {scope}"
          required_entities:
            - ssi_reference
          optional_entities:
            - instrument_class
            - market
            - currency
            - settlement_type

        - intent: universe_add
          description: "Add to trading universe"
          canonical_verb: cbu-custody.add-universe
          trigger_phrases:
            - "add {instruments} in {market}"
            - "we'll trade {instruments} in {market}"
            - "enable {instruments} for {market}"
          required_entities:
            - instrument_class
            - market
          optional_entities:
            - currencies
            - settlement_types

  # ==========================================================================
  # OTC DERIVATIVES DOMAIN (Phase 3.5)
  # ==========================================================================
  otc_derivatives:
    description: "OTC derivatives trading setup and collateral management"

    # ------------------------------------------------------------------------
    # Counterparty Management Sub-domain
    # ------------------------------------------------------------------------
    counterparty:
      description: "Derivatives counterparty management"

      intents:
        - intent: counterparty_create
          description: "Create or onboard a derivatives counterparty"
          canonical_verb: counterparty.ensure
          trigger_phrases:
            - "add {counterparty} as counterparty"
            - "onboard {counterparty} for derivatives"
            - "set up {counterparty} as trading counterparty"
            - "we trade derivatives with {counterparty}"
            - "{counterparty} is our swap counterparty"
            - "create counterparty {counterparty}"
          required_entities:
            - counterparty_reference
          optional_entities:
            - counterparty_type
            - jurisdiction
            - lei
          default_inferences:
            counterparty_type: BANK
            is_financial_counterparty: true
          examples:
            - input: "Add Goldman Sachs as counterparty for derivatives"
              entities:
                counterparty_reference: "Goldman Sachs"
                counterparty_type: "BANK"

        - intent: counterparty_add_bic
          description: "Add BIC code to counterparty"
          canonical_verb: counterparty.add-bic
          trigger_phrases:
            - "add BIC {bic} to {counterparty}"
            - "{counterparty} BIC is {bic}"
            - "set {counterparty} SWIFT to {bic}"
          required_entities:
            - counterparty_reference
            - bic

        - intent: counterparty_query
          description: "Query counterparties"
          canonical_verb: counterparty.list
          trigger_phrases:
            - "who are our swap counterparties"
            - "list counterparties"
            - "show derivatives counterparties"
            - "who do we trade with"
          is_query: true

    # ------------------------------------------------------------------------
    # ISDA Management Sub-domain
    # ------------------------------------------------------------------------
    isda:
      description: "ISDA Master Agreement management"

      intents:
        - intent: isda_establish
          description: "Establish ISDA Master Agreement"
          canonical_verb: isda.establish
          trigger_phrases:
            - "establish ISDA with {counterparty}"
            - "set up ISDA master with {counterparty}"
            - "we have an ISDA with {counterparty}"
            - "create ISDA for {counterparty}"
            - "2002 ISDA with {counterparty}"
            - "link ISDA to {counterparty}"
          required_entities:
            - counterparty_reference
          optional_entities:
            - isda_version
            - governing_law
            - date
          default_inferences:
            isda_version: "2002"
            governing_law: NY
            netting_applicable: true
          examples:
            - input: "Establish 2002 ISDA with Goldman under NY law"
              entities:
                counterparty_reference: "Goldman Sachs"
                isda_version: "2002"
                governing_law: "NY"

        - intent: isda_add_products
          description: "Add products to ISDA scope"
          canonical_verb: isda.add-product-scope
          trigger_phrases:
            - "add {products} to the ISDA"
            - "ISDA covers {products}"
            - "include {products} under ISDA"
            - "trade {products} under {counterparty} ISDA"
          required_entities:
            - derivative_product_type
          optional_entities:
            - isda_reference
            - counterparty_reference
          examples:
            - input: "Add IRS and CDS to the Goldman ISDA"
              entities:
                isda_reference: "@isda-goldman"
                derivative_product_type: ["IRS", "CDS"]

        - intent: isda_query
          description: "Query ISDA agreements"
          canonical_verb: isda.query-by-counterparty
          trigger_phrases:
            - "do we have an ISDA with {counterparty}"
            - "show ISDA for {counterparty}"
            - "what's our ISDA status with {counterparty}"
            - "list our ISDAs"
          is_query: true

    # ------------------------------------------------------------------------
    # CSA Management Sub-domain
    # ------------------------------------------------------------------------
    csa:
      description: "Credit Support Annex and collateral terms"

      intents:
        - intent: csa_establish
          description: "Establish CSA under ISDA"
          canonical_verb: csa.establish
          trigger_phrases:
            - "set up CSA with {counterparty}"
            - "establish VM CSA under {isda}"
            - "add CSA to ISDA"
            - "create collateral agreement with {counterparty}"
            - "we have a CSA with {counterparty}"
            - "collateral terms with {counterparty}"
          required_entities:
            - isda_reference
          optional_entities:
            - csa_type
            - threshold_amount
            - currency
          default_inferences:
            csa_type: VM
            our_threshold: 0
            their_threshold: 0
            mta: 500000
          examples:
            - input: "Set up VM CSA with Goldman, zero threshold both ways"
              entities:
                counterparty_reference: "Goldman Sachs"
                csa_type: "VM"
                threshold_amount: 0

        - intent: csa_add_eligible_collateral
          description: "Add eligible collateral to CSA"
          canonical_verb: csa.add-eligible-collateral
          trigger_phrases:
            - "accept {collateral_type} as collateral"
            - "add {collateral_type} to eligible collateral"
            - "{collateral_type} with {haircut}% haircut"
            - "we can post {collateral_type}"
            - "eligible collateral includes {collateral_type}"
          required_entities:
            - collateral_asset_class
          optional_entities:
            - csa_reference
            - haircut_percentage
            - currency
            - jurisdiction
          examples:
            - input: "Accept USD cash and US treasuries with 2% haircut"
              entities:
                collateral_asset_class: ["CASH", "GOVT_BOND"]
                currency: "USD"
                jurisdiction: "US"
                haircut_percentage: 2.0

        - intent: csa_set_im_terms
          description: "Configure Initial Margin terms"
          canonical_verb: csa.set-im-terms
          trigger_phrases:
            - "set up IM CSA"
            - "initial margin terms"
            - "configure IM with {counterparty}"
            - "post IM to {custodian}"
            - "IM segregation at {custodian}"
          required_entities:
            - csa_reference
          optional_entities:
            - custodian_reference
            - threshold_amount

        - intent: csa_query
          description: "Query CSA terms"
          canonical_verb: csa.list
          trigger_phrases:
            - "what are our collateral terms with {counterparty}"
            - "show CSA for {counterparty}"
            - "what collateral can we post"
            - "what's the threshold with {counterparty}"
          is_query: true

    # ------------------------------------------------------------------------
    # Collateral Operations Sub-domain
    # ------------------------------------------------------------------------
    collateral:
      description: "Collateral account and position management"

      intents:
        - intent: collateral_setup_accounts
          description: "Set up collateral accounts"
          canonical_verb: collateral.ensure-account
          trigger_phrases:
            - "set up collateral accounts for {csa}"
            - "create VM account with {counterparty}"
            - "establish IM segregated account"
            - "collateral account at {custodian}"
            - "tri-party account with {agent}"
          required_entities:
            - collateral_account_type
          optional_entities:
            - csa_reference
            - custodian_reference
          examples:
            - input: "Set up tri-party IM account at BNY"
              entities:
                collateral_account_type: "TRI_PARTY"
                custodian_reference: "BNY Mellon"

        - intent: collateral_query_accounts
          description: "Query collateral accounts"
          canonical_verb: collateral.list-accounts
          trigger_phrases:
            - "show collateral accounts"
            - "list our collateral positions"
            - "where is our collateral"
            - "collateral account status"
          is_query: true

    # ------------------------------------------------------------------------
    # Confirmation Workflow Sub-domain
    # ------------------------------------------------------------------------
    confirmation:
      description: "Trade confirmation configuration"

      intents:
        - intent: confirmation_configure
          description: "Configure confirmation method"
          canonical_verb: confirmation.configure
          trigger_phrases:
            - "use {platform} for confirmations with {counterparty}"
            - "confirm {products} via {platform}"
            - "set up {platform} for {counterparty}"
            - "confirmation method is {platform}"
            - "{products} confirms through {platform}"
          required_entities:
            - confirmation_method
          optional_entities:
            - counterparty_reference
            - derivative_product_type
          default_inferences:
            auto_match: true
            target_days: 1
          examples:
            - input: "Use MarkitWire for IRS confirmations with Goldman"
              entities:
                confirmation_method: "MARKITWIRE"
                derivative_product_type: ["IRS"]
                counterparty_reference: "Goldman Sachs"

        - intent: confirmation_query
          description: "Query confirmation setup"
          canonical_verb: confirmation.list
          trigger_phrases:
            - "how do we confirm with {counterparty}"
            - "show confirmation methods"
            - "confirmation status"
          is_query: true

    # ------------------------------------------------------------------------
    # Compound OTC Intents
    # ------------------------------------------------------------------------
    compound_otc:
      description: "Multi-step OTC setup"

      intents:
        - intent: full_counterparty_setup
          description: "Complete counterparty onboarding"
          expands_to:
            - counterparty_create
            - isda_establish
            - isda_add_products
            - csa_establish
            - csa_add_eligible_collateral
            - confirmation_configure
          trigger_phrases:
            - "set up complete derivatives relationship with {counterparty}"
            - "full counterparty onboarding for {counterparty}"
            - "establish trading with {counterparty}"
          examples:
            - input: "Set up complete derivatives relationship with Goldman"

        - intent: im_setup
          description: "Complete IM setup"
          expands_to:
            - csa_establish
            - csa_add_eligible_collateral
            - collateral_setup_accounts
          trigger_phrases:
            - "set up initial margin with {counterparty}"
            - "IM setup for {counterparty}"
            - "configure UMR compliance with {counterparty}"

  # ==========================================================================
  # COMPOUND/META INTENTS
  # ==========================================================================
  compound:
    description: "Intents that expand to multiple atomic intents"

    intents:
      - intent: full_setup
        description: "Complete trading matrix setup"
        expands_to:
          - profile_create
          - im_assign # multiple
          - pricing_set # multiple
          - sweep_configure # multiple
          - sla_commit # multiple
          - profile_validate
        trigger_phrases:
          - "set up complete trading for {cbu}"
          - "full custody setup"
          - "onboard trading for {cbu}"
          - "complete trading configuration"

      - intent: im_with_connectivity
        description: "Assign IM and provision connectivity in one"
        expands_to:
          - im_assign
          - service_resource.provision
          - im_link_connectivity
        trigger_phrases:
          - "{manager} via {method}" # Implies assign + connectivity

      - intent: european_equity_setup
        description: "Set up European equity trading"
        expands_to:
          - universe_add # for each European market
          - im_assign # with European scope
          - ssi_create # for European CSDs
        trigger_phrases:
          - "set up European equities"
          - "enable trading in Europe"
          - "European equity capability"

  # ==========================================================================
  # CLARIFICATION INTENTS
  # ==========================================================================
  clarification:
    description: "Intents for handling ambiguity and clarification"

    intents:
      - intent: clarify_manager
        description: "Clarify which investment manager"
        trigger_conditions:
          - multiple_manager_matches
          - ambiguous_manager_reference
        prompts:
          - "Which investment manager do you mean: {options}?"
          - "I found multiple matches for '{query}': {options}. Which one?"

      - intent: clarify_scope
        description: "Clarify trading scope"
        trigger_conditions:
          - ambiguous_scope
          - missing_scope
        prompts:
          - "What instruments should {manager} trade?"
          - "Which markets should this cover?"

      - intent: confirm_expansion
        description: "Confirm scope expansion"
        trigger_conditions:
          - category_expansion
        prompts:
          - "'{category}' includes {expanded_list}. Is that correct?"

  # ==========================================================================
  # WORKFLOW INTENTS
  # ==========================================================================
  workflow:
    description: "Workflow navigation and control"

    intents:
      - intent: workflow_next
        description: "Move to next step"
        trigger_phrases:
          - "next"
          - "continue"
          - "what's next"
          - "move on"
        action: advance_workflow

      - intent: workflow_back
        description: "Go back to previous step"
        trigger_phrases:
          - "go back"
          - "previous"
          - "undo that"
        action: revert_workflow

      - intent: workflow_status
        description: "Show workflow progress"
        trigger_phrases:
          - "where are we"
          - "show progress"
          - "what's done"
          - "status"
        is_query: true

      - intent: workflow_skip
        description: "Skip current step"
        trigger_phrases:
          - "skip this"
          - "not now"
          - "later"
          - "skip"
        action: skip_step

# ==========================================================================
# INTENT RELATIONSHIPS
# ==========================================================================
intent_relationships:
  # Natural followups - boost confidence when intent follows another
  natural_followups:
    profile_create:
      - profile_set_universe
      - im_assign
    im_assign:
      - im_assign # Can assign multiple IMs
      - pricing_set
      - im_change_connectivity
    pricing_set:
      - pricing_set # Can set multiple sources
      - sweep_configure
      - sla_commit
    sweep_configure:
      - sweep_configure # Multiple currencies
      - sla_commit
    sla_commit:
      - sla_commit # Multiple SLAs
      - profile_validate
    profile_validate:
      - profile_materialize
      - im_assign # Fix gaps

  # Exclusive intents - can't both be true
  mutually_exclusive:
    - [im_assign, im_remove]
    - [profile_create, profile_materialize]

# ==========================================================================
# CONFIDENCE THRESHOLDS
# ==========================================================================
confidence_thresholds:
  # Per-intent thresholds (overrides defaults)
  defaults:
    execute_threshold: 0.85 # Auto-execute if above
    confirm_threshold: 0.65 # Confirm before executing
    suggest_threshold: 0.45 # Suggest but ask
    clarify_threshold: 0.0 # Below this, ask clarifying questions

  overrides:
    # Higher thresholds for destructive actions
    im_remove:
      execute_threshold: 0.95
      confirm_threshold: 0.80
    profile_materialize:
      execute_threshold: 0.95
      confirm_threshold: 0.80
    # Lower thresholds for queries (safe to execute)
    im_query:
      execute_threshold: 0.60
    pricing_query:
      execute_threshold: 0.60
    profile_visualize:
      execute_threshold: 0.60
    # OTC derivatives queries
    counterparty_query:
      execute_threshold: 0.60
    isda_query:
      execute_threshold: 0.60
    csa_query:
      execute_threshold: 0.60
    confirmation_query:
      execute_threshold: 0.60
