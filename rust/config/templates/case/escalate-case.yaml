template: escalate-case
version: 1

metadata:
  name: Escalate Case
  summary: Escalate a KYC case to higher authority for review

  description: |
    Escalates a KYC case to a higher authority level when:
    - Complex issues require senior review
    - True match on screening hit
    - High-risk indicators detected
    - Policy exceptions needed

    Escalation levels: STANDARD -> SENIOR_COMPLIANCE -> EXECUTIVE -> BOARD

  when_to_use:
    - True match found on screening
    - Red flags require senior review
    - Workflow blocker shows "escalation_required"
    - Analyst cannot make decision

  when_not_to_use:
    - Routine case proceeding normally
    - Issue can be resolved at current level

  effects:
    - Case escalation level updated
    - Notification sent to escalation authority
    - Case event logged
    - May pause other workflow activities

  next_steps:
    - Senior reviewer to assess case
    - Provide additional information if requested
    - Await escalation decision

tags:
  - case
  - escalation
  - review
  - decision

workflow_context:
  applicable_workflows:
    - kyc_case
    - kyc_onboarding
  applicable_states:
    - ANALYSIS
    - REVIEW
    - SCREENING
  resolves_blockers:
    - escalation_required

params:
  case_id:
    type: uuid
    required: true
    source: session
    description: Case to escalate

  escalation_level:
    type: enum
    required: true
    enum_values:
      - SENIOR_COMPLIANCE
      - EXECUTIVE
      - BOARD
    prompt: "Escalation level"

  reason:
    type: string
    required: true
    prompt: "Reason for escalation"
    example: "True match on PEP screening - government minister"

  red_flag_ids:
    type: array
    required: false
    prompt: "Related red flag IDs"

body: |
  (kyc-case.escalate
    :case "$case_id"
    :level $escalation_level
    :reason "$reason")

related_templates:
  - review-screening-hit
  - raise-red-flag
  - approve-case
