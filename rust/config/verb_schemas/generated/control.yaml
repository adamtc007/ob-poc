version: '2.0'
domain: control
description: Control relationships (distinct from ownership) - voting rights, board control, veto powers
verbs:
- verb: control.show-board-controller
  domain: control
  action: show-board-controller
  aliases:
  - show-board-controller
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - show board controller
  - who controls the board
  - board controller for
  - get board controller
  - show board controller control
  - show board controller the control
  - show board controller ownership chain
  - control show board controller
  examples:
  - (control.show-board-controller :cbu-id "...")
  doc: |
    Show the computed board controller for a CBU.
    Returns the natural person or entity that controls the board,
    with derivation explanation, confidence level, and data gaps.
  tier: diagnostics
- verb: control.identify-ubos
  domain: control
  action: identify-ubos
  aliases:
  - identify-ubos
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      include-indirect:
        type: bool
      ownership-threshold:
        type: decimal
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - who owns this company
  - who owns this
  - identify owners
  - find ubos
  - identify ubos
  - who are the beneficial owners
  - find ultimate beneficial owners
  - discover ubos
  - identify beneficial owners
  - who ultimately owns
  - who owns this entity
  - find the ubos
  - calculate ownership
  - trace beneficial ownership
  - who controls this company
  examples:
  - (control.identify-ubos :cbu-id "...")
  doc: |
    Identify all UBOs for a CBU across all control vectors:
    - Ownership â‰¥25% (direct or indirect)
    - Board majority control
    - Trust control (trustee discretion, appointor power)
    - Partnership GP control
  tier: intent
- verb: control.build-graph
  domain: control
  action: build-graph
  aliases:
  - build-graph
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      depth:
        type: int
      include-inactive:
        type: bool
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - build graph control
  - build graph the control
  - build graph ownership chain
  - control build graph
  examples:
  - (control.build-graph :cbu-id "...")
  doc: |
    Build full control graph for a CBU.
    Nodes: entities, persons, positions
    Edges: OWNS, CONTROLS, APPOINTS, INFLUENCES, HOLDS_POSITION
  tier: intent
- verb: control.recompute-board-controller
  domain: control
  action: recompute-board-controller
  aliases:
  - recompute-board-controller
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      force:
        type: bool
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - recompute board controller
  - recalculate board controller
  - refresh board controller
  - recompute board controller control
  - recompute board controller the control
  - recompute board controller ownership chain
  - control recompute board controller
  examples:
  - (control.recompute-board-controller :cbu-id "...")
  doc: |
    Recompute the board controller for a CBU.
    Traverses ownership/control graph, analyzes board compositions,
    and determines who has effective control.
  tier: composite
- verb: control.import-gleif-control
  domain: control
  action: import-gleif-control
  aliases:
  - import-gleif-control
  args:
    style: keyworded
    required:
      lei:
        type: str
      cbu-id:
        type: entity_name
    optional:
      include-ultimate-parent:
        type: bool
  positional_sugar:
  - cbu-id
  - lei
  invocation_phrases:
  - import gleif control
  - import lei control data
  - load gleif hierarchy
  - import gleif control control
  - import gleif control the control
  - import gleif control ownership chain
  - control import gleif control
  examples:
  - (control.import-gleif-control :cbu-id "..." :lei "...")
  doc: |
    Import control data from GLEIF (Global LEI Foundation).
    Uses the LEI-RR (Relationship Record) data for parent/child control.
  tier: composite
- verb: control.add
  domain: control
  action: add
  aliases:
  - add
  args:
    style: keyworded
    required:
      controller-entity-id:
        type: entity_name
      controlled-entity-id:
        type: entity_name
      control-type:
        type: str
    optional:
      evidence-doc-id:
        type: entity_name
      description:
        type: str
      effective-from:
        type: date
      control-percentage:
        type: decimal
  positional_sugar:
  - controller-entity-id
  - controlled-entity-id
  invocation_phrases:
  - add control relationship
  - create control link
  - add controller
  - add voting control
  - add board control
  - create control
  - link controller
  - add management control
  - add control
  - add the control
  - add ownership chain
  - control add
  examples:
  - (control.add :controller-entity-id "..." :controlled-entity-id "..." :control-type "...")
  doc: Add a control relationship between entities (idempotent by controller+controlled+type)
  tier: intent
- verb: control.import-psc-register
  domain: control
  action: import-psc-register
  aliases:
  - import-psc-register
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
      company-number:
        type: str
    optional:
      source:
        type: str
  positional_sugar:
  - cbu-id
  - company-number
  invocation_phrases:
  - import psc register
  - import persons with significant control
  - load psc data
  - import psc register control
  - import psc register the control
  - import psc register ownership chain
  - control import psc register
  examples:
  - (control.import-psc-register :cbu-id "..." :company-number "...")
  doc: |
    Import board controller data from a PSC (Persons with Significant Control) register.
    Supports UK Companies House PSC format.
  tier: composite
- verb: control.list-controlled
  domain: control
  action: list-controlled
  aliases:
  - list-controlled
  args:
    style: keyworded
    required:
      entity-id:
        type: entity_name
  positional_sugar:
  - entity-id
  invocation_phrases:
  - list controlled entities
  - what do they control
  - show controlled
  - list subsidiaries
  - view controlled companies
  - what is controlled
  - show control targets
  - list control targets
  - list controlled control
  - list controlled the control
  - list controlled ownership chain
  - control list controlled
  examples:
  - (control.list-controlled :entity-id "...")
  doc: List what an entity controls
  tier: reference
- verb: control.analyze
  domain: control
  action: analyze
  aliases:
  - analyze
  - examine
  - inspect
  args:
    style: keyworded
    required:
      entity-id:
        type: entity_name
    optional:
      control-threshold:
        type: decimal
      include-indirect:
        type: bool
  positional_sugar:
  - entity-id
  invocation_phrases:
  - analyze control
  - analyze the control
  - examine control
  - inspect control
  - analyze ownership chain
  - control analyze
  examples:
  - (control.analyze :entity-id "...")
  doc: |
    Comprehensive control analysis for any entity type.
    Routes to appropriate analyzer based on entity_type.
    Aggregates all control vectors: ownership, board, trust, partnership.
  tier: intent
- verb: control.end
  domain: control
  action: end
  aliases:
  - end
  args:
    style: keyworded
    required:
      effective-to:
        type: date
      relationship-id:
        type: entity_name
  positional_sugar:
  - relationship-id
  - effective-to
  invocation_phrases:
  - end control relationship
  - terminate control
  - end voting control
  - remove controller
  - control relationship ended
  - end board control
  - close control link
  - end control
  - end the control
  - end ownership chain
  - control end
  examples:
  - (control.end :relationship-id "..." :effective-to "...")
  doc: End a control relationship
  tier: intent
- verb: control.trace-chain
  domain: control
  action: trace-chain
  aliases:
  - trace-chain
  args:
    style: keyworded
    required:
      from-entity-id:
        type: entity_name
      to-entity-id:
        type: entity_name
    optional:
      relationship-types:
        type: list
  positional_sugar:
  - from-entity-id
  - to-entity-id
  invocation_phrases:
  - show ownership chain
  - trace ownership
  - ownership chain
  - follow ownership
  - trace control chain
  - show control chain
  - ownership hierarchy
  - trace ownership path
  - trace chain control
  - trace chain the control
  - trace chain ownership chain
  - control trace chain
  examples:
  - (control.trace-chain :from-entity-id "..." :to-entity-id "...")
  doc: |
    Trace a specific control chain from one entity to another.
    Returns the path and cumulative control percentage.
  tier: intent
- verb: control.set-board-controller
  domain: control
  action: set-board-controller
  aliases:
  - set-board-controller
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
      controller-entity-id:
        type: entity_name
      justification:
        type: str
    optional:
      evidence-doc-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  - controller-entity-id
  invocation_phrases:
  - set board controller
  - override board controller
  - manually set board controller
  - set board controller control
  - set board controller the control
  - set board controller ownership chain
  - control set board controller
  examples:
  - (control.set-board-controller :cbu-id "..." :controller-entity-id "..." :justification "...")
  doc: |
    Manually set the board controller for a CBU.
    Creates an override that takes precedence over computed values.
    Requires justification and evidence document.
  tier: intent
- verb: control.reconcile-ownership
  domain: control
  action: reconcile-ownership
  aliases:
  - reconcile-ownership
  args:
    style: keyworded
    required:
      entity-id:
        type: entity_name
  positional_sugar:
  - entity-id
  invocation_phrases:
  - reconcile ownership control
  - reconcile ownership the control
  - reconcile ownership ownership chain
  - control reconcile ownership
  examples:
  - (control.reconcile-ownership :entity-id "...")
  doc: |
    Reconcile ownership for an entity:
      - Verify voting shares sum to 100%
      - Identify gaps or overlaps
      - Flag discrepancies
  tier: intent
- verb: control.list-controllers
  domain: control
  action: list-controllers
  aliases:
  - list-controllers
  args:
    style: keyworded
    required:
      entity-id:
        type: entity_name
  positional_sugar:
  - entity-id
  invocation_phrases:
  - list controllers
  - who controls this
  - show controllers
  - find controllers
  - list who controls
  - view control relationships
  - show controlling parties
  - list control sources
  - list controllers control
  - list controllers the control
  - list controllers ownership chain
  - control list controllers
  examples:
  - (control.list-controllers :entity-id "...")
  doc: List who controls an entity
  tier: reference
- verb: control.clear-board-controller-override
  domain: control
  action: clear-board-controller-override
  aliases:
  - clear-board-controller-override
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - clear board controller override
  - remove board controller override
  - clear board controller override control
  - clear board controller override the control
  - clear board controller override ownership chain
  - control clear board controller override
  examples:
  - (control.clear-board-controller-override :cbu-id "...")
  doc: |
    Clear a manual board controller override.
    Returns to computed value.
  tier: intent
