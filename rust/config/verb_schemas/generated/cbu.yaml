version: '2.0'
domain: cbu
description: Client Business Unit operations
verbs:
- verb: cbu.remove-product
  domain: cbu
  action: remove-product
  aliases:
  - remove-product
  args:
    style: keyworded
    required:
      product:
        type: entity_name
      cbu-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  - product
  invocation_phrases:
  - remove product cbu
  - remove product the cbu
  - remove product client business unit
  - cbu remove product
  examples:
  - (cbu.remove-product :cbu-id "..." :product "...")
  doc: Remove a product from a CBU (deletes service_delivery_map entries)
  tier: intent
  tags:
  - relationship
  - write
  - product
  - cbu
- verb: cbu.add-product
  domain: cbu
  action: add-product
  aliases:
  - add-product
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
      product:
        type: entity_name
  positional_sugar:
  - cbu-id
  - product
  invocation_phrases:
  - add product cbu
  - add product the cbu
  - add product client business unit
  - cbu add product
  examples:
  - (cbu.add-product :cbu-id "..." :product "...")
  doc: Add a product to a CBU (creates service_delivery_map entries for all services)
  tier: intent
  tags:
  - relationship
  - write
  - product
  - cbu
- verb: cbu.verify-evidence
  domain: cbu
  action: verify-evidence
  aliases:
  - verify-evidence
  args:
    style: keyworded
    required:
      evidence-id:
        type: uuid
      verified-by:
        type: str
      verification-status:
        type: enum
        values:
        - PENDING
        - VERIFIED
        - REJECTED
        - EXPIRED
    optional:
      verification-notes:
        type: str
  positional_sugar:
  - evidence-id
  - verification-status
  invocation_phrases:
  - verify evidence cbu
  - verify evidence the cbu
  - verify evidence client business unit
  - cbu verify evidence
  examples:
  - (cbu.verify-evidence :evidence-id "..." :verification-status "..." :verified-by "...")
  doc: Mark evidence as verified or rejected
  tier: intent
  tags:
  - evidence
  - write
  - kyc
  - verification
  - cbu
- verb: cbu.read
  domain: cbu
  action: read
  aliases:
  - fetch
  - get
  - read
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - read cbu
  - read the cbu
  - get cbu
  - fetch cbu
  - read client business unit
  - cbu read
  examples:
  - (cbu.read :cbu-id "...")
  doc: Read a CBU by ID
  tier: diagnostics
  tags:
  - read
  - query
  - cbu
- verb: cbu.list-evidence
  domain: cbu
  action: list-evidence
  aliases:
  - list-evidence
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      verification-status:
        type: str
      evidence-type:
        type: str
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - list evidence cbu
  - list evidence the cbu
  - list evidence client business unit
  - cbu list evidence
  examples:
  - (cbu.list-evidence :cbu-id "...")
  doc: List evidence for a CBU
  tier: diagnostics
  tags:
  - evidence
  - read
  - query
  - kyc
  - cbu
- verb: cbu.assign-role
  domain: cbu
  action: assign-role
  aliases:
  - assign-role
  args:
    style: keyworded
    required:
      role:
        type: entity_name
      cbu-id:
        type: entity_name
      entity-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  - entity-id
  invocation_phrases:
  - assign role cbu
  - assign role the cbu
  - assign role client business unit
  - cbu assign role
  examples:
  - (cbu.assign-role :cbu-id "..." :entity-id "..." :role "...")
  doc: Assign a role to an entity within a CBU
  tier: intent
  tags:
  - relationship
  - write
  - role
  - cbu
- verb: cbu.parties
  domain: cbu
  action: parties
  aliases:
  - parties
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      as-of-date:
        type: date
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - parties cbu
  - parties the cbu
  - parties client business unit
  - cbu parties
  examples:
  - (cbu.parties :cbu-id "...")
  doc: List all parties (entities with their roles) for a CBU
  tier: diagnostics
  tags:
  - read
  - query
  - relationship
  - cbu
- verb: cbu.create
  domain: cbu
  action: create
  aliases:
  - add
  - create
  - new
  args:
    style: keyworded
    required:
      name:
        type: str
      jurisdiction:
        type: entity_name
    optional:
      client-type:
        type: str
      manco-entity-id:
        type: entity_name
      description:
        type: str
      nature-purpose:
        type: str
      commercial-client-entity-id:
        type: entity_name
      fund-entity-id:
        type: entity_name
  positional_sugar:
  - name
  - jurisdiction
  invocation_phrases:
  - create CBU
  - new CBU
  - add commercial business unit
  - create new CBU
  - set up CBU
  - establish CBU
  - add CBU
  - create business unit
  examples:
  - (cbu.create :name "..." :jurisdiction "...")
  doc: Create a new Client Business Unit (idempotent by fund-entity-id if provided)
  tier: intent
  tags:
  - lifecycle
  - write
  - cbu
- verb: cbu.delete
  domain: cbu
  action: delete
  aliases:
  - delete
  - drop
  - remove
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - delete cbu
  - delete the cbu
  - remove cbu
  - drop cbu
  - delete client business unit
  - cbu delete
  examples:
  - (cbu.delete :cbu-id "...")
  doc: Delete a CBU (fails if has dependencies - use delete-cascade for full cleanup)
  tier: intent
  tags:
  - lifecycle
  - write
  - destructive
  - cbu
- verb: cbu.delete-cascade
  domain: cbu
  action: delete-cascade
  aliases:
  - delete-cascade
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      delete-entities:
        type: bool
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - delete cascade cbu
  - delete cascade the cbu
  - delete cascade client business unit
  - cbu delete cascade
  examples:
  - (cbu.delete-cascade :cbu-id "...")
  doc: Delete a CBU and all related data (entities, roles, documents, etc.)
  tier: intent
  tags:
  - lifecycle
  - write
  - destructive
  - cascade
  - cbu
- verb: cbu.ensure
  domain: cbu
  action: ensure
  aliases:
  - ensure
  args:
    style: keyworded
    required:
      name:
        type: str
      jurisdiction:
        type: entity_name
    optional:
      client-type:
        type: str
      nature-purpose:
        type: str
      commercial-client-entity-id:
        type: entity_name
  positional_sugar:
  - name
  - jurisdiction
  invocation_phrases:
  - ensure cbu
  - ensure the cbu
  - ensure client business unit
  - cbu ensure
  examples:
  - (cbu.ensure :name "..." :jurisdiction "...")
  doc: Create or update a CBU by natural key
  tier: intent
  tags:
  - lifecycle
  - write
  - idempotent
  - cbu
- verb: cbu.set-category
  domain: cbu
  action: set-category
  aliases:
  - set-category
  args:
    style: keyworded
    required:
      category:
        type: str
      cbu-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  - category
  invocation_phrases:
  - set category cbu
  - set category the cbu
  - set category client business unit
  - cbu set category
  examples:
  - (cbu.set-category :cbu-id "..." :category "...")
  doc: Set CBU relationship category (FUND_MANDATE, CORPORATE_GROUP, etc.)
  tier: intent
  tags:
  - lifecycle
  - write
  - classification
  - cbu
- verb: cbu.update
  domain: cbu
  action: update
  aliases:
  - edit
  - modify
  - update
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      status:
        type: str
      jurisdiction:
        type: str
      commercial-client-entity-id:
        type: entity_name
      client-type:
        type: str
      name:
        type: str
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - update CBU
  - modify CBU
  - change CBU details
  - edit CBU
  - update CBU name
  - change CBU status
  - modify business unit
  - update cbu
  examples:
  - (cbu.update :cbu-id "...")
  doc: Update a CBU
  tier: intent
  tags:
  - lifecycle
  - write
  - cbu
- verb: cbu.show
  domain: cbu
  action: show
  aliases:
  - show
  args:
    style: keyworded
    required:
      cbu-id:
        type: entity_name
    optional:
      as-of-date:
        type: date
  positional_sugar:
  - cbu-id
  invocation_phrases:
  - show cbu
  - show the cbu
  - show client business unit
  - cbu show
  examples:
  - (cbu.show :cbu-id "...")
  doc: Show full CBU structure including entities, roles, documents, screenings
  tier: diagnostics
  tags:
  - read
  - query
  - detailed
  - cbu
- verb: cbu.decide
  domain: cbu
  action: decide
  aliases:
  - decide
  args:
    style: keyworded
    required:
      rationale:
        type: str
      cbu-id:
        type: entity_name
      decision:
        type: str
      decided-by:
        type: str
    optional:
      case-id:
        type: entity_name
      conditions:
        type: str
      escalation-reason:
        type: str
  positional_sugar:
  - cbu-id
  - decision
  invocation_phrases:
  - decide cbu
  - decide the cbu
  - decide client business unit
  - cbu decide
  examples:
  - (cbu.decide :cbu-id "..." :decision "..." :decided-by "..." :rationale "...")
  doc: Record KYC/AML decision for CBU collective state (entities, UBOs, documents)
  tier: intent
  tags:
  - lifecycle
  - write
  - decision
  - kyc
  - cbu
- verb: cbu.list
  domain: cbu
  action: list
  aliases:
  - get all
  - list
  - show
  args:
    style: keyworded
    optional:
      status:
        type: str
      jurisdiction:
        type: str
      limit:
        type: int
      offset:
        type: int
      client-type:
        type: str
  invocation_phrases:
  - list CBUs
  - show all CBUs
  - view CBU list
  - display CBUs
  - list all business units
  - show CBUs for client
  - get CBU list
  - list cbu
  examples:
  - (cbu.list)
  doc: List CBUs with optional filters
  tier: diagnostics
  tags:
  - read
  - query
  - list
  - cbu
- verb: cbu.remove-role
  domain: cbu
  action: remove-role
  aliases:
  - remove-role
  args:
    style: keyworded
    required:
      role:
        type: entity_name
      cbu-id:
        type: entity_name
      entity-id:
        type: entity_name
  positional_sugar:
  - cbu-id
  - entity-id
  invocation_phrases:
  - remove role from CBU
  - unassign role
  - delete CBU role
  - remove entity from CBU
  - unlink entity role
  - remove participant
  - remove role cbu
  - remove role the cbu
  examples:
  - (cbu.remove-role :cbu-id "..." :entity-id "..." :role "...")
  doc: Remove a specific role from an entity within a CBU
  tier: intent
  tags:
  - relationship
  - write
  - role
  - cbu
- verb: cbu.attach-evidence
  domain: cbu
  action: attach-evidence
  aliases:
  - attach-evidence
  args:
    style: keyworded
    required:
      evidence-type:
        type: enum
        values:
        - DOCUMENT
        - ATTESTATION
        - SCREENING
        - REGISTRY_CHECK
        - MANUAL_VERIFICATION
      cbu-id:
        type: entity_name
    optional:
      evidence-category:
        type: str
      attestation-ref:
        type: str
      document-id:
        type: entity_name
      description:
        type: str
      attached-by:
        type: str
  positional_sugar:
  - cbu-id
  - evidence-type
  invocation_phrases:
  - attach evidence cbu
  - attach evidence the cbu
  - attach evidence client business unit
  - cbu attach evidence
  examples:
  - (cbu.attach-evidence :cbu-id "..." :evidence-type "...")
  doc: Attach evidence (document or attestation) to CBU
  tier: intent
  tags:
  - evidence
  - write
  - kyc
  - cbu
- verb: cbu.create-from-client-group
  domain: cbu
  action: create-from-client-group
  aliases:
  - create-from-client-group
  args:
    style: keyworded
    required:
      group-id:
        type: entity_name
    optional:
      dry-run:
        type: bool
      gleif-category:
        type: enum
        values:
        - FUND
        - GENERAL
      default-jurisdiction:
        type: str
      limit:
        type: int
      role-filter:
        type: str
      jurisdiction-filter:
        type: str
      manco-entity-id:
        type: entity_name
  positional_sugar:
  - group-id
  invocation_phrases:
  - create CBUs from client group
  - bulk create CBUs for funds
  - onboard entities as CBUs
  - create CBUs from research
  - convert entities to CBUs
  - create CBUs from GLEIF funds
  - onboard allianz funds
  - create cbus for allianz
  examples:
  - (cbu.create-from-client-group :group-id "...")
  doc: Generate DSL batch to create CBUs from client group entities (stages in runbook)
  tier: composite
  tags:
  - bulk
  - lifecycle
  - write
  - client-group
  - onboarding
  - gleif
  - macro
  - cbu
