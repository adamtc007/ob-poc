version: '2.0'
domain: holding
description: Investor position management in share classes (supports both TA KYC-as-a-Service and UBO intra-group holdings)
verbs:
- verb: holding.create-for-investor
  domain: holding
  action: create-for-investor
  aliases:
  - create-for-investor
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
      investor-id:
        type: entity_name
      usage-type:
        type: str
    optional:
      cost-basis:
        type: decimal
      acquisition-date:
        type: date
      provider:
        type: str
      provider-reference:
        type: str
      units:
        type: decimal
      holding-status:
        type: str
  positional_sugar:
  - share-class-id
  - investor-id
  invocation_phrases:
  - create for investor holding
  - create for investor the holding
  - create for investor position
  - holding create for investor
  examples:
  - (holding.create-for-investor :share-class-id "..." :investor-id "..." :usage-type "...")
  doc: Create holding linked to an investor record (for TA KYC-as-a-Service)
  tier: intent
- verb: holding.ensure
  domain: holding
  action: ensure
  aliases:
  - ensure
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
      investor-entity-id:
        type: entity_name
    optional:
      investor-id:
        type: entity_name
      provider-reference:
        type: str
      units:
        type: decimal
      cost-basis:
        type: decimal
      acquisition-date:
        type: date
      provider:
        type: str
      holding-status:
        type: str
      usage-type:
        type: str
  positional_sugar:
  - share-class-id
  - investor-entity-id
  invocation_phrases:
  - ensure holding
  - ensure the holding
  - ensure position
  - holding ensure
  examples:
  - (holding.ensure :share-class-id "..." :investor-entity-id "...")
  doc: Ensure investor holding exists (upsert)
  tier: intent
- verb: holding.update-status
  domain: holding
  action: update-status
  aliases:
  - update-status
  args:
    style: keyworded
    required:
      holding-id:
        type: entity_name
      holding-status:
        type: str
  positional_sugar:
  - holding-id
  - holding-status
  invocation_phrases:
  - update status holding
  - update status the holding
  - update status position
  - holding update status
  examples:
  - (holding.update-status :holding-id "..." :holding-status "...")
  doc: Update holding status
  tier: intent
- verb: holding.list-by-investor
  domain: holding
  action: list-by-investor
  aliases:
  - list-by-investor
  args:
    style: keyworded
    required:
      investor-entity-id:
        type: entity_name
  positional_sugar:
  - investor-entity-id
  invocation_phrases:
  - list by investor holding
  - list by investor the holding
  - list by investor position
  - holding list by investor
  examples:
  - (holding.list-by-investor :investor-entity-id "...")
  doc: List holdings for an investor across all share classes
  tier: reference
- verb: holding.list-by-share-class
  domain: holding
  action: list-by-share-class
  aliases:
  - list-by-share-class
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
    optional:
      usage-type:
        type: str
      status:
        type: str
  positional_sugar:
  - share-class-id
  invocation_phrases:
  - list by share class holding
  - list by share class the holding
  - list by share class position
  - holding list by share class
  examples:
  - (holding.list-by-share-class :share-class-id "...")
  doc: List holdings for a share class
  tier: reference
- verb: holding.list-by-investor-record
  domain: holding
  action: list-by-investor-record
  aliases:
  - list-by-investor-record
  args:
    style: keyworded
    required:
      investor-id:
        type: entity_name
  positional_sugar:
  - investor-id
  invocation_phrases:
  - list by investor record holding
  - list by investor record the holding
  - list by investor record position
  - holding list by investor record
  examples:
  - (holding.list-by-investor-record :investor-id "...")
  doc: List holdings for an investor record (TA workflow)
  tier: reference
- verb: holding.close
  domain: holding
  action: close
  aliases:
  - close
  args:
    style: keyworded
    required:
      holding-id:
        type: entity_name
  positional_sugar:
  - holding-id
  invocation_phrases:
  - close holding
  - close the holding
  - close position
  - holding close
  examples:
  - (holding.close :holding-id "...")
  doc: Close a holding (mark as inactive)
  tier: intent
- verb: holding.update-units
  domain: holding
  action: update-units
  aliases:
  - update-units
  args:
    style: keyworded
    required:
      holding-id:
        type: entity_name
      units:
        type: decimal
    optional:
      cost-basis:
        type: decimal
  positional_sugar:
  - holding-id
  - units
  invocation_phrases:
  - update units holding
  - update units the holding
  - update units position
  - holding update units
  examples:
  - (holding.update-units :holding-id "..." :units "...")
  doc: Update holding units (for position adjustments)
  tier: intent
- verb: holding.read
  domain: holding
  action: read
  aliases:
  - fetch
  - get
  - read
  args:
    style: keyworded
    required:
      holding-id:
        type: entity_name
  positional_sugar:
  - holding-id
  invocation_phrases:
  - read holding
  - read the holding
  - get holding
  - fetch holding
  - read position
  - holding read
  examples:
  - (holding.read :holding-id "...")
  doc: Read a holding by ID
  tier: reference
- verb: holding.create
  domain: holding
  action: create
  aliases:
  - add
  - create
  - new
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
      investor-entity-id:
        type: entity_name
    optional:
      units:
        type: decimal
      cost-basis:
        type: decimal
      acquisition-date:
        type: date
  positional_sugar:
  - share-class-id
  - investor-entity-id
  invocation_phrases:
  - create holding
  - create the holding
  - add holding
  - new holding
  - create position
  - holding create
  examples:
  - (holding.create :share-class-id "..." :investor-entity-id "...")
  doc: Create a new investor holding in a share class (idempotent by share_class+investor)
  tier: intent
