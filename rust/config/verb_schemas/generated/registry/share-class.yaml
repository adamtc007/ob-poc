version: '2.0'
domain: share-class
description: |
  Extended share class operations for instrument type and compartment linking.

  PURPOSE: Add fund-specific attributes to share classes, particularly:
  - Instrument type classification (shares, units, LP interests, etc.)
  - Compartment linkage for umbrella funds

  NOTE: Core share class CRUD (create, update, delete) is in capital.yaml.
  These verbs extend share classes with fund-specific fields.

  INSTRUMENT TYPES:
  - UNITS: Standard fund units (FCP, unit trusts)
  - SHARES: Corporate shares (SICAV, OEIC)
  - LP_INTEREST: Limited partnership interest
  - PARTNERSHIP_INTEREST: General partnership interest
  - NOMINEE_POSITION: Nominee holding (internal tracking)
  - TRACKING_SHARES: Performance tracking shares
  - CARRIED_INTEREST: Carry/promote entitlement
verbs:
- verb: share-class.set-instrument-type
  domain: share-class
  action: set-instrument-type
  aliases:
  - set-instrument-type
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
      instrument-type:
        type: str
  positional_sugar:
  - share-class-id
  - instrument-type
  invocation_phrases:
  - set instrument type
  - classify share class
  - set as LP interest
  - set as units
  - set as shares
  - set instrument type share class
  - set instrument type share-class
  - set instrument type the share class
  examples:
  - (share-class.set-instrument-type :share-class-id "..." :instrument-type "...")
  doc: |
    Set the instrument type classification for a share class.

    Determines what kind of instrument investors hold when they
    invest in this share class (shares, units, LP interests, etc.).
  tier: intent
- verb: share-class.link-to-compartment
  domain: share-class
  action: link-to-compartment
  aliases:
  - link-to-compartment
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
      compartment-id:
        type: entity_name
  positional_sugar:
  - share-class-id
  - compartment-id
  invocation_phrases:
  - link share class to compartment
  - assign to compartment
  - connect to sub-fund
  - link to sleeve
  - link to compartment share class
  - link to compartment share-class
  - link to compartment the share class
  - link to compartment class
  examples:
  - (share-class.link-to-compartment :share-class-id "..." :compartment-id "...")
  doc: |
    Link a share class to a fund compartment.

    Associates the share class with a specific compartment/sleeve
    within an umbrella fund. Investors in this share class own
    exposure to the linked compartment.
  tier: intent
- verb: share-class.unlink-from-compartment
  domain: share-class
  action: unlink-from-compartment
  aliases:
  - unlink-from-compartment
  args:
    style: keyworded
    required:
      share-class-id:
        type: entity_name
  positional_sugar:
  - share-class-id
  invocation_phrases:
  - unlink from compartment
  - remove from compartment
  - detach from sleeve
  - unlink from compartment share class
  - unlink from compartment share-class
  - unlink from compartment the share class
  - unlink from compartment class
  - share class unlink from compartment
  examples:
  - (share-class.unlink-from-compartment :share-class-id "...")
  doc: |
    Remove share class from compartment (set compartment_id to NULL).

    Use when restructuring fund or moving share class to different compartment.
  tier: intent
- verb: share-class.list-by-compartment
  domain: share-class
  action: list-by-compartment
  aliases:
  - list-by-compartment
  args:
    style: keyworded
    required:
      compartment-id:
        type: entity_name
  positional_sugar:
  - compartment-id
  invocation_phrases:
  - share classes in compartment
  - list classes by compartment
  - compartment share classes
  - list by compartment share class
  - list by compartment share-class
  - list by compartment the share class
  - list by compartment class
  - share class list by compartment
  examples:
  - (share-class.list-by-compartment :compartment-id "...")
  doc: |
    List all share classes in a compartment.

    Returns all share classes linked to the specified compartment.
    Useful for viewing fee structures and investor breakdowns by sleeve.
  tier: diagnostics
