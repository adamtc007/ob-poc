domains:
  onboarding:
    description: "Automated onboarding orchestration"
    verbs:
      auto-complete:
        description: "Automatically progress onboarding by generating and executing DSL for missing entities"
        metadata:
          tier: intent
          source_of_truth: workflow
          scope: cbu
          noun: onboarding
          subject_kinds: [cbu]
        behavior: plugin
        plugin:
          handler: OnboardingAutoCompleteOp
        args:
          - name: cbu-id
            type: uuid
            required: true
            description: "The CBU to auto-complete onboarding for"
            lookup:
              entity_type: cbu
              table: cbus
              schema: ob-poc
              search_key: name
              primary_key: cbu_id
          - name: max-steps
            type: integer
            required: false
            default: 20
            description: "Maximum number of entities to create in one run"
          - name: dry-run
            type: boolean
            required: false
            default: false
            description: "If true, return generated DSL without executing"
          - name: target-stage
            type: string
            required: false
            description: "Optional: stop when this stage is complete (e.g., 'kyc_case', 'trading_profile')"
        returns:
          type: record
          description: "Summary of actions taken or DSL generated"
