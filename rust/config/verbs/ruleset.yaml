domains:
  ruleset:
    description: "Ruleset management â€” boundary-owned policy containers for eligibility rules"

    invocation_hints:
      - "ruleset"
      - "policy"
      - "eligibility rules"
      - "booking rules"

    verbs:
      create:
        description: "Create a new ruleset (starts in draft status)"
        behavior: plugin
        metadata:
          tier: intent
          source_of_truth: operational
          scope: global
          noun: ruleset
        invocation_phrases:
          - "create ruleset"
          - "new ruleset"
          - "add eligibility ruleset"
          - "create policy"
        args:
          - name: name
            type: string
            required: true
            maps_to: name
            description: "Ruleset name"
          - name: owner-type
            type: string
            required: true
            maps_to: owner_type
            description: "global, offering, or principal"
          - name: owner-id
            type: uuid
            required: false
            maps_to: owner_id
            description: "ID of the owning entity (required for offering/principal)"
          - name: boundary
            type: string
            required: true
            maps_to: ruleset_boundary
            description: "regulatory, commercial, or operational"
        returns:
          type: record
          name: ruleset

      publish:
        description: "Publish a draft ruleset (validates field dictionary, checks temporal overlap)"
        behavior: plugin
        lifecycle:
          precondition_checks:
            - "requires_prior:rule.add"
        metadata:
          tier: intent
          source_of_truth: operational
          scope: global
          noun: ruleset
        invocation_phrases:
          - "publish ruleset"
          - "activate ruleset"
          - "make ruleset active"
          - "deploy rules"
        args:
          - name: ruleset-id
            type: uuid
            required: true
            maps_to: ruleset_id
        returns:
          type: uuid
          name: ruleset_id

      retire:
        description: "Retire an active ruleset"
        behavior: plugin
        metadata:
          tier: intent
          source_of_truth: operational
          scope: global
          noun: ruleset
        invocation_phrases:
          - "retire ruleset"
          - "deactivate ruleset"
          - "disable policy"
        args:
          - name: ruleset-id
            type: uuid
            required: true
            maps_to: ruleset_id
        returns:
          type: uuid
          name: ruleset_id
