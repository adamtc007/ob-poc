domains:
  screening:
    description: Entity screening operations (PEP, sanctions, adverse media). Supports Pattern B entity scope.
    verbs:
      pep:
        description: Run PEP (Politically Exposed Persons) screening on one or more entities
        invocation_phrases:
          - "run PEP screening"
          - "check for PEP"
          - "PEP check"
          - "screen for politically exposed"
          - "is this person a PEP"
          - "PEP scan"
          - "check political exposure"
          - "run PEP check"
          - "politically exposed person check"
          - "bulk PEP screening"
        metadata:
          tier: intent
          source_of_truth: external
          scope: cbu
          noun: screening
        behavior: plugin
        args:
          - name: entity-ids
            type: uuid_list
            required: false
            description: Filter to specific entity UUIDs (injected by :scope rewrite from Pattern B)
          - name: entity-id
            type: uuid
            required: false
            lookup:
              table: entities
              entity_type: entity
              schema: ob-poc
              search_key: name
              primary_key: entity_id
          - name: provider
            type: string
            required: false
        validation:
          one_of_required: [entity-id, entity-ids]
        returns:
          type: record_set
          description: Screening results for each entity

      sanctions:
        description: Run sanctions list screening on one or more entities
        invocation_phrases:
          - "run sanctions check"
          - "sanctions screening"
          - "check sanctions lists"
          - "screen against sanctions"
          - "OFAC check"
          - "sanctions scan"
          - "run sanctions screening"
          - "check if sanctioned"
          - "sanctions list check"
          - "bulk sanctions screening"
        metadata:
          tier: intent
          source_of_truth: external
          scope: cbu
          noun: screening
        behavior: plugin
        args:
          - name: entity-ids
            type: uuid_list
            required: false
            description: Filter to specific entity UUIDs (injected by :scope rewrite from Pattern B)
          - name: entity-id
            type: uuid
            required: false
            lookup:
              table: entities
              entity_type: entity
              schema: ob-poc
              search_key: name
              primary_key: entity_id
          - name: lists
            type: string_list
            required: false
        validation:
          one_of_required: [entity-id, entity-ids]
        returns:
          type: record_set
          description: Screening results for each entity

      adverse-media:
        description: Run adverse media screening on one or more entities
        invocation_phrases:
          - "run adverse media check"
          - "adverse media screening"
          - "check for negative news"
          - "media scan"
          - "screen for adverse media"
          - "negative media check"
          - "run media screening"
          - "check news coverage"
          - "adverse news scan"
          - "bulk media screening"
        metadata:
          tier: intent
          source_of_truth: external
          scope: cbu
          noun: screening
        behavior: plugin
        args:
          - name: entity-ids
            type: uuid_list
            required: false
            description: Filter to specific entity UUIDs (injected by :scope rewrite from Pattern B)
          - name: entity-id
            type: uuid
            required: false
            lookup:
              table: entities
              entity_type: entity
              schema: ob-poc
              search_key: name
              primary_key: entity_id
          - name: lookback-months
            type: integer
            required: false
            default: 24
        validation:
          one_of_required: [entity-id, entity-ids]
        returns:
          type: record_set
          description: Screening results for each entity
