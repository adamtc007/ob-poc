domains:
  ssi-type:
    description: SSI type reference data (SECURITIES, CASH, COLLATERAL)
    verbs:
      ensure:
        description: Create or update an SSI type
        behavior: crud
        crud:
          operation: upsert
          table: ssi_types
          schema: ob-poc
          conflict_keys:
            - code
          returning: code
        args:
          - name: code
            type: string
            required: true
            maps_to: code
          - name: name
            type: string
            required: true
            maps_to: name
          - name: description
            type: string
            required: false
            maps_to: description
          - name: display-order
            type: integer
            required: false
            maps_to: display_order
            default: 0
          - name: is-active
            type: boolean
            required: false
            maps_to: is_active
            default: true
        returns:
          type: string
          name: code
          capture: true

      read:
        description: Read an SSI type by code
        behavior: crud
        crud:
          operation: select
          table: ssi_types
          schema: ob-poc
        args:
          - name: code
            type: string
            required: true
            maps_to: code
        returns:
          type: record

      list:
        description: List all SSI types
        behavior: crud
        crud:
          operation: select
          table: ssi_types
          schema: ob-poc
          order_by: display_order
        args:
          - name: is-active
            type: boolean
            required: false
            maps_to: is_active
        returns:
          type: record_set

      deactivate:
        description: Deactivate an SSI type
        behavior: crud
        crud:
          operation: update
          table: ssi_types
          schema: ob-poc
        args:
          - name: code
            type: string
            required: true
            maps_to: code
          - name: is-active
            type: boolean
            required: false
            maps_to: is_active
            default: false
        returns:
          type: void
