domains:
  ubo.registry:
    description: "UBO registry lifecycle â€” track beneficial ownership determinations through approval"

    invocation_hints:
      - "ubo registry"
      - "promote candidate"
      - "advance ubo"
      - "waive ubo"
      - "approve ubo"

    verbs:
      promote:
        description: "Promote a UBO registry entry from CANDIDATE to IDENTIFIED"
        invocation_phrases:
          - "promote ubo candidate"
          - "identify ubo"
          - "confirm ubo candidate"
          - "candidate identified"
        metadata:
          tier: intent
          source_of_truth: workflow
          scope: cbu
          noun: ubo_registry
          tags: [ubo, registry, lifecycle, kyc]
        behavior: plugin
        handler: UboRegistryPromoteOp
        args:
          - name: registry-id
            type: uuid
            required: true
            description: UBO registry entry to promote
          - name: notes
            type: string
            required: false
            description: Notes on identification
        returns:
          type: record

      advance:
        description: "Advance a UBO registry entry through the state machine"
        invocation_phrases:
          - "advance ubo status"
          - "move ubo forward"
          - "progress ubo review"
          - "ubo status change"
        metadata:
          tier: intent
          source_of_truth: workflow
          scope: cbu
          noun: ubo_registry
          tags: [ubo, registry, lifecycle, kyc]
        behavior: plugin
        handler: UboRegistryAdvanceOp
        args:
          - name: registry-id
            type: uuid
            required: true
            description: UBO registry entry to advance
          - name: new-status
            type: string
            required: true
            description: Target status
            valid_values:
              - IDENTIFIED
              - PROVABLE
              - PROVED
              - REVIEWED
              - APPROVED
          - name: notes
            type: string
            required: false
            description: Notes on transition
        returns:
          type: record

      waive:
        description: "Waive a UBO registry entry with authority and reason"
        invocation_phrases:
          - "waive ubo requirement"
          - "waive ubo entry"
          - "exempt from ubo review"
          - "ubo waiver"
        metadata:
          tier: intent
          source_of_truth: workflow
          scope: cbu
          noun: ubo_registry
          tags: [ubo, registry, waiver]
        behavior: plugin
        handler: UboRegistryWaiveOp
        args:
          - name: registry-id
            type: uuid
            required: true
            description: UBO registry entry to waive
          - name: reason
            type: string
            required: true
            description: Justification for waiver
          - name: authority
            type: string
            required: true
            description: Authority granting the waiver
        returns:
          type: record

      reject:
        description: "Reject a UBO registry entry (terminal state)"
        invocation_phrases:
          - "reject ubo"
          - "ubo not confirmed"
          - "reject ubo candidate"
          - "ubo determination rejected"
        metadata:
          tier: intent
          source_of_truth: workflow
          scope: cbu
          noun: ubo_registry
          tags: [ubo, registry, terminal]
        behavior: plugin
        handler: UboRegistryRejectOp
        args:
          - name: registry-id
            type: uuid
            required: true
            description: UBO registry entry to reject
          - name: reason
            type: string
            required: true
            description: Reason for rejection
        returns:
          type: record

      expire:
        description: "Expire a UBO registry entry (terminal state)"
        invocation_phrases:
          - "expire ubo entry"
          - "ubo determination expired"
          - "ubo expired"
        metadata:
          tier: intent
          source_of_truth: workflow
          scope: cbu
          noun: ubo_registry
          tags: [ubo, registry, terminal]
        behavior: plugin
        handler: UboRegistryExpireOp
        args:
          - name: registry-id
            type: uuid
            required: true
            description: UBO registry entry to expire
          - name: reason
            type: string
            required: false
            description: Reason for expiry
        returns:
          type: record
