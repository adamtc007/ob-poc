template: review-screening-hit
version: 1

primary_entity:
  type: kyc_case
  param: case_name
  description: KYC case containing the screening

metadata:
  name: Review Screening Hit
  summary: Review and disposition a screening hit

  description: |
    Reviews a screening hit from AML/PEP/sanctions screening and records
    a disposition decision. The hit can be:
    - Cleared as FALSE_POSITIVE (no match)
    - Confirmed as TRUE_MATCH (requires escalation/mitigation)
    - Escalated for senior review

  when_to_use:
    - Screening returned hits that need review
    - Workflow blocker shows "unresolved_alert"
    - Analyst reviewing case in SCREENING or ANALYSIS state

  when_not_to_use:
    - No hits to review (screening was clear)
    - Hit already reviewed

  effects:
    - Hit status updated
    - Rationale recorded for audit
    - If TRUE_MATCH, red flag may be raised
    - If all hits reviewed, workflow can advance

  next_steps:
    - If TRUE_MATCH, escalate case or raise red flag
    - Review remaining hits
    - Proceed with document collection

tags:
  - screening
  - hit
  - review
  - analysis

workflow_context:
  applicable_workflows:
    - kyc_case
    - kyc_onboarding
  applicable_states:
    - SCREENING
    - ANALYSIS
  resolves_blockers:
    - unresolved_alert
    - pending_hit

params:
  case_name:
    type: string
    required: true
    source: session
    description: KYC case name

  screening_name:
    type: string
    required: true
    source: blocker
    prompt: "Screening reference or entity name"

  outcome:
    type: enum
    required: true
    enum_values:
      - FALSE_POSITIVE
      - TRUE_MATCH
      - ESCALATE
    prompt: "Review outcome"

  rationale:
    type: string
    required: true
    prompt: "Rationale for decision"
    example: "Name match only, different date of birth and nationality"

body: |
  (case-screening.review-hit
    :screening-id "$screening_name"
    :status "$outcome"
    :review-notes "$rationale")

related_templates:
  - escalate-case
